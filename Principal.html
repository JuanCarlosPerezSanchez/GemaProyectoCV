<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Principal - Juan Carlos Pérez Sánchez</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Pantalla principal -->
    <div id="main-content">
        <!-- Mapeado de la imagen -->
        <img src="Images/Principal.png" usemap="#image-map" class="mapped-image">
        
        <!-- Puntos parpadeantes -->
        <div class="overlay">
            <!-- Punto para la PC -->
            <div class="blinking-dot" style="top: 390px; left: 1190px;"></div>
             <!-- Punto para el teclado -->
            <div class="blinking-dot" style="top: 685px; left: 760px;"></div>
            <!-- Punto para el monitor -->
            <div class="blinking-dot" style="top: 445px; left: 637px;"></div>
            <!-- Punto para el ratón -->
            <div class="blinking-dot" style="top: 655px; left: 1030px;"></div>
        </div>

        <map name="image-map">
            <area target="_self" alt="PC" title="Educación" href="#educacion" coords="1458,123,933,198,931,619,1466,654,1547,639,1547,149" shape="poly">
            <area target="_self" alt="Teclado" title="Habilidades" href="#habilidades" coords="540,692,534,735,623,749,954,698,938,671,868,652" shape="poly">
            <area target="_self" alt="Monitor" title="Sobre mi" href="#sobre-mi" coords="355,307,355,611,901,566,901,340" shape="poly">
            <area target="_self" alt="Raton" title="Contacto" href="#contacto" coords="989,659,1026,645,1059,647,1082,661,1096,682,1063,686,1007,684" shape="poly">
        </map>
    </div>

    <!-- Reproductor de música -->
    <audio id="background-music" loop>
        <source src="Musica/this-minimal-technology_pure-12327.mp3" type="audio/mpeg">
    </audio>

    <!-- Controlador de música -->
    <div id="music-controls">
        <button id="music-toggle">
            <span id="play-icon">▶️</span>
            <span id="pause-icon" style="display: none;">⏸️</span>
        </button>
        <button id="mute-toggle">
            <span id="unmuted-icon">🔊</span>
            <span id="muted-icon" style="display: none;">🔇</span>
        </button>
        <input type="range" id="volume-control" min="0" max="1" step="0.1" value="0.3">
    </div>

    <!-- Secciones ocultas -->
    <section id="sobre-mi" class="container hidden">
        <h2>Sobre Mí</h2>
        <p>Me considero una persona amable y educada, a la que le apasiona aprender, sobre todo me encanta el mundo de la informática y la electrónica en ese orden. <br> Tambien soy un gran amante del deporte</p>
        <button onclick="hideSection('sobre-mi')">Cerrar</button>
    </section>

    <section id="educacion" class="container hidden">
        <h2>Educación</h2>
        <ul>
            <li>Grado Medio de Telecomunicaciones - Instituto Tecnológico Superior ADA ITS (2019-2023)</li>
            <li>Grado Superior en Desarrollo de Aplicaciones Web - Instituto Tecnológico Superior ADA ITS (2023-2025)</li>
        </ul>
        <button onclick="hideSection('educacion')">Cerrar</button>
    </section>

    <section id="habilidades" class="container hidden">
        <h2>Habilidades</h2>
        <ul>
            <li>Buena comunicación - Lo que me convierte en el compañero ideal para cualquier equipo.</li>
            <li>Empatía - Algo inprescindible para las interacciónes sociales diarias</li>
            <li>Trabajo en equipo</li>
            <li>Responsabilidad</li>
            <li>Toma de decisiones</li>
        </ul>
        <button onclick="hideSection('habilidades')">Cerrar</button>
    </section>

    <section id="contacto" class="container hidden">
        <h2>Contacto</h2>
        <p>Teléfono: 611 607 940</p>
        <p>Email: jcpersa74@gmail.com</p>
        <p>Ubicación: Av. Altamira 29, bloque 1, 8°D, Sevilla</p>
        <button onclick="hideSection('contacto')">Cerrar</button>
    </section>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const musicPlayer = document.getElementById('background-music');
            const musicToggle = document.getElementById('music-toggle');
            const playIcon = document.getElementById('play-icon');
            const pauseIcon = document.getElementById('pause-icon');
            const muteToggle = document.getElementById('mute-toggle');
            const unmutedIcon = document.getElementById('unmuted-icon');
            const mutedIcon = document.getElementById('muted-icon');
            const volumeControl = document.getElementById('volume-control');

            // Recuperar el estado de la música desde localStorage
            const savedMusicState = localStorage.getItem('musicState');
            if (savedMusicState) {
                const { volume, muted, paused } = JSON.parse(savedMusicState);
                musicPlayer.volume = volume;
                musicPlayer.muted = muted;
                if (!paused) {
                    musicPlayer.play().catch(() => {
                        console.log("La reproducción automática fue bloqueada.");
                    });
                }
                volumeControl.value = volume;
            }

            // Función combinada para actualizar íconos de play/pause y mute
            function updateMusicIcons() {
                if (musicPlayer.paused) {
                    playIcon.style.display = "inline";
                    pauseIcon.style.display = "none";
                } else {
                    playIcon.style.display = "none";
                    pauseIcon.style.display = "inline";
                }

                if (musicPlayer.muted) {
                    unmutedIcon.style.display = "none";
                    mutedIcon.style.display = "inline";
                } else {
                    unmutedIcon.style.display = "inline";
                    mutedIcon.style.display = "none";
                }
            }

            // Controlar la música (pausar/reanudar)
            musicToggle.addEventListener('click', function() {
                if (musicPlayer.paused) {
                    musicPlayer.play();
                } else {
                    musicPlayer.pause();
                }
                updateMusicIcons();
            });

            // Controlar el mute
            muteToggle.addEventListener('click', function() {
                musicPlayer.muted = !musicPlayer.muted;
                updateMusicIcons();
            });

            // Controlar el volumen
            volumeControl.addEventListener('input', function() {
                musicPlayer.volume = volumeControl.value;
                if (musicPlayer.volume === 0) {
                    musicPlayer.muted = true;
                } else {
                    musicPlayer.muted = false;
                }
                updateMusicIcons();
            });

            // Actualizar los íconos al cargar la página
            updateMusicIcons();

            // Manejar clics en las áreas mapeadas
            const areas = document.querySelectorAll('area');
            areas.forEach(area => {
                area.addEventListener('click', function(event) {
                    event.preventDefault(); // Evitar el comportamiento por defecto del enlace

                    // Ocultar todas las secciones
                    document.querySelectorAll('.container').forEach(section => {
                        section.classList.add('hidden');
                    });

                    // Mostrar la sección correspondiente
                    const targetId = area.getAttribute('href').substring(1); // Obtener el id de la sección
                    const targetSection = document.getElementById(targetId);
                    if (targetSection) {
                        targetSection.classList.remove('hidden');
                    }
                });
            });
        });

        // Función para ocultar secciones
        function hideSection(sectionId) {
            const section = document.getElementById(sectionId);
            if (section) {
                section.classList.add('hidden');
            }
        }
    </script>
</body>
</html>