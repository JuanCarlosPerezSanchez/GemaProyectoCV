<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Inicio - Juan Carlos P√©rez S√°nchez</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Pantalla inicial -->
    <div id="initial-screen">
        <img src="Images/Inicio.png" alt="Fondo Inicial" class="background-img">
        <!-- Contenedor para los textos centrados -->
        <div id="text-container">
            <h1 id="main-text">Mi nombre es Juan Carlos P√©rez S√°nchez y <br> soy desarrollador web</h1>
            <div id="start-text">Pulsa para empezar</div>
        </div>
    </div>

    <!-- Reproductor de m√∫sica -->
    <audio id="background-music" loop autoplay>
        <source src="Musica/this-minimal-technology_pure-12327.mp3" type="audio/mpeg">
    </audio>

    <!-- Controlador de m√∫sica -->
    <div id="music-controls">
        <button id="music-toggle">
            <span id="play-icon">‚ñ∂Ô∏è</span>
            <span id="pause-icon" style="display: none;">‚è∏Ô∏è</span>
        </button>
        <button id="mute-toggle">
            <span id="unmuted-icon">üîä</span>
            <span id="muted-icon" style="display: none;">üîá</span>
        </button>
        <input type="range" id="volume-control" min="0" max="1" step="0.1" value="0.3">
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const initialScreen = document.getElementById('initial-screen');
            const musicPlayer = document.getElementById('background-music');
            const musicToggle = document.getElementById('music-toggle');
            const playIcon = document.getElementById('play-icon');
            const pauseIcon = document.getElementById('pause-icon');
            const muteToggle = document.getElementById('mute-toggle');
            const unmutedIcon = document.getElementById('unmuted-icon');
            const mutedIcon = document.getElementById('muted-icon');
            const volumeControl = document.getElementById('volume-control');

            // Establecer el volumen inicial bajo (30%)
            musicPlayer.volume = 0.3;

            // Intentar reproducir autom√°ticamente (puede ser bloqueado por el navegador)
            musicPlayer.play().catch(() => {
                console.log("La reproducci√≥n autom√°tica fue bloqueada.");
            });

            // Funci√≥n combinada para actualizar √≠conos de play/pause y mute
            function updateMusicIcons() {
                if (musicPlayer.paused) {
                    playIcon.style.display = "inline"; // Mostrar play
                    pauseIcon.style.display = "none"; // Ocultar pause
                } else {
                    playIcon.style.display = "none"; // Ocultar play
                    pauseIcon.style.display = "inline"; // Mostrar pause
                }

                if (musicPlayer.muted) {
                    unmutedIcon.style.display = "none"; // Ocultar altavoz normal
                    mutedIcon.style.display = "inline"; // Mostrar altavoz tachado
                } else {
                    unmutedIcon.style.display = "inline"; // Mostrar altavoz normal
                    mutedIcon.style.display = "none"; // Ocultar altavoz tachado
                }
            }

            // Controlar la m√∫sica (pausar/reanudar)
            musicToggle.addEventListener('click', function() {
                if (musicPlayer.paused) {
                    musicPlayer.play();
                } else {
                    musicPlayer.pause();
                }
                updateMusicIcons(); // Actualizar los √≠conos
            });

            // Controlar el mute
            muteToggle.addEventListener('click', function() {
                musicPlayer.muted = !musicPlayer.muted; // Alternar mute
                updateMusicIcons(); // Actualizar los √≠conos
            });

            // Controlar el volumen
            volumeControl.addEventListener('input', function() {
                musicPlayer.volume = volumeControl.value;
                if (musicPlayer.volume === 0) {
                    musicPlayer.muted = true; // Mute si el volumen es 0
                } else {
                    musicPlayer.muted = false; // Desmute si el volumen es mayor a 0
                }
                updateMusicIcons(); // Actualizar los √≠conos
            });

            // Al hacer clic en la pantalla inicial
            initialScreen.addEventListener('click', function() {
                // Guardar el estado de la m√∫sica en localStorage
                localStorage.setItem('musicState', JSON.stringify({
                    volume: musicPlayer.volume,
                    muted: musicPlayer.muted,
                    paused: musicPlayer.paused
                }));

                // Redirigir a la pantalla principal (Principal.html)
                window.location.href = "Principal.html";
            });

            // Actualizar los √≠conos al cargar la p√°gina
            updateMusicIcons();
        });
    </script>
</body>
</html>